(function(){"use strict";angular.module("boxDrag",[]).directive("boxDrag",boxDrag);boxDrag.$inject=["$document"];function boxDrag($document){var directive={link:link,restrict:"E"};return directive;function link(scope,element,attrs){var startX=0,startY=0,x=0,y=20;element.css({position:"fixed",top:attrs.top||undefined,left:attrs.left||undefined,bottom:attrs.bottom||"20px",right:attrs.right||"20px",width:attrs.width||"400px"});angular.element(element[0].querySelector("div.box-drag-header")).css({padding:attrs.paddingHeader||"7px 10px"});angular.element(element[0].querySelector("div.box-drag-body")).css({height:attrs.bodyHeight||"310px"});angular.element(element[0].querySelector("div.box-drag-footer")).css({padding:attrs.paddingFooter||"7px 10px"});var height_header=angular.element(element[0].querySelector("div.box-drag-header")).prop("offsetHeight"),height_body=angular.element(element[0].querySelector("div.box-drag-body")).prop("offsetHeight"),height_footer=angular.element(element[0].querySelector("div.box-drag-footer")).prop("offsetHeight");element.css({height:height_header+height_body+height_footer+"px"});var initialMove=true;var jqLiteOffset=function(element){var documentElem,box={top:0,left:0},doc=element&&element.ownerDocument;documentElem=doc.documentElement;if(typeof element.getBoundingClientRect!==undefined){box=element.getBoundingClientRect()}return{top:box.top+(window.pageYOffset||documentElem.scrollTop)-(documentElem.clientTop||0),left:box.left+(window.pageXOffset||documentElem.scrollLeft)-(documentElem.clientLeft||0),innerTop:box.top}};angular.element(element[0].querySelector("div.box-drag-handle")).on("mousedown",function(event){event.preventDefault();x=jqLiteOffset(element[0]).left;y=jqLiteOffset(element[0]).top;startX=event.pageX-x;startY=event.pageY-y;$document.on("mousemove",mousemove);$document.on("mouseup",mouseup)});function mousemove(event){element.css({position:"absolute"});y=event.pageY-startY;x=event.pageX-startX;element.css({top:y+"px",left:x+"px"})}function mouseup(){$document.unbind("mousemove",mousemove);$document.unbind("mouseup",mouseup);element.css({position:"fixed",top:jqLiteOffset(element[0]).innerTop+"px"})}}}})();
